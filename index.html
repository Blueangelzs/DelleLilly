<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spinda Collector</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; background: #f9f9f9; }
    #nav { display: flex; justify-content: space-around; background: #222; color: #fff; padding: 10px; }
    #nav button { background: #444; color: #fff; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
    #main > div { display: none; padding: 20px; }
    .active { display: block; }
    .map-image { width: 100%; max-width: 400px; cursor: pointer; }
    .spinda-img { width: 60px; height: auto; margin: 5px; }
  </style>
</head>
<body>
  <div id="nav">
    <button data-screen="home">Professor Blars</button>
    <button data-screen="maps">Spawn Maps</button>
    <button data-screen="dex">Dex</button>
    <button data-screen="achievements">Achievements</button>
  </div>

  <div id="main">
    <div id="home" class="active">
      <h2>Professor Blars' Lab</h2>
      <p>Welcome back, Trainer!</p>
      <p>XP: <span id="xp">0</span></p>
      <p>Total Spinda Collected: <span id="collection-count">0</span></p>
      <p>Unique Spinda Found: <span id="dex-count">0</span></p>
    </div>

    <div id="maps">
      <h2>Spawn Zone 1</h2>
      <p>Click the map to try and catch a Spinda!</p>
      <img src="https://github.com/Blueangelzs/DelleLilly/blob/main/images/maps/Hometown.png?raw=true" alt="Hometown Map" class="map-image" onclick="tryCatch()">
      <p>XP per click: 1 | XP per catch: 5</p>
      <div id="collection"></div>
    </div>

    <div id="dex">
      <h2>Spinda Dex</h2>
      <p>Total unique Spinda: <span id="dex-count">0</span></p>
      <div id="dex-list"></div>
    </div>

    <div id="achievements">
      <h2>Achievements</h2>
      <ul>
        <li>Catch 1 Spinda</li>
        <li>Catch 10 Spinda</li>
        <li>Reach 50 XP</li>
        <li>Complete 100% of Dex (future)</li>
      </ul>
    </div>
  </div>

  <script>
    const spindaPool = [
      "https://raw.githubusercontent.com/Blueangelzs/DelleLilly/main/spinda1.1.png",
      "https://raw.githubusercontent.com/Blueangelzs/DelleLilly/main/spinda2.png",
      "https://raw.githubusercontent.com/Blueangelzs/DelleLilly/main/spinda3.png"
    ];

    let xp = parseInt(localStorage.getItem("xp")) || 0;
    let collection = JSON.parse(localStorage.getItem("collection")) || [];
    let dex = JSON.parse(localStorage.getItem("dex")) || [];

    function saveData() {
      localStorage.setItem("xp", xp);
      localStorage.setItem("collection", JSON.stringify(collection));
      localStorage.setItem("dex", JSON.stringify(dex));
    }

    function showScreen(screenId) {
      document.querySelectorAll("#main > div").forEach(div => div.classList.remove("active"));
      document.getElementById(screenId).classList.add("active");
      updateUI();
    }

    function tryCatch() {
      xp += 1;
      if (Math.random() < 0.5) {
        const caught = spindaPool[Math.floor(Math.random() * spindaPool.length)];
        collection.push(caught);
        if (!dex.includes(caught)) dex.push(caught);
        xp += 4;
      }
      saveData();
      updateUI();
    }

    function updateUI() {
      document.getElementById("xp").textContent = xp;
      document.getElementById("collection-count").textContent = collection.length;
      document.getElementById("dex-count").textContent = dex.length;

      const collectionDiv = document.getElementById("collection");
      if (collectionDiv) {
        collectionDiv.innerHTML = "";
        collection.forEach(img => {
          const el = document.createElement("img");
          el.src = img;
          el.className = "spinda-img";
          collectionDiv.appendChild(el);
        });
      }

      const dexDiv = document.getElementById("dex-list");
      dexDiv.innerHTML = "";
      dex.forEach(img => {
        const el = document.createElement("img");
        el.src = img;
        el.className = "spinda-img";
        dexDiv.appendChild(el);
      });
    }

    window.onload = () => {
      document.querySelectorAll("#nav button").forEach(button => {
        button.addEventListener("click", () => {
          const screen = button.getAttribute("data-screen");
          showScreen(screen);
        });
      });

      showScreen('home');
    };
  </script>
</body>
</html>
